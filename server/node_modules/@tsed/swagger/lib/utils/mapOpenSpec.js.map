{"version":3,"file":"mapOpenSpec.js","sourceRoot":"","sources":["../../src/utils/mapOpenSpec.ts"],"names":[],"mappings":";;;AAAA,qCAAoC;AAEpC,yCAAkD;AAClD,+CAA0C;AAC1C,iDAA4C;AAC5C,iDAA4C;AAE5C;;;;;;;GAOG;AACH,SAAgB,WAAW,CAAC,IAAS,EAAE,EAAC,QAAQ,EAAE,OAAO,EAAE,WAAW,EAAE,WAAW,EAAM;IACvF,WAAW,GAAG,WAAW,IAAI,eAAQ,CAAmB,IAAI,EAAE,SAAS,EAAE,eAAQ,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;IAE3G,MAAM,OAAO,GAAG;QACd,OAAO;QACP,WAAW;QACX,WAAW;KACZ,CAAC;IAEF,QAAQ,yBAAW,CAAC,WAAW,CAAC,EAAE;QAChC,KAAK,kBAAS,CAAC,OAAO;YACpB,IAAI,GAAG,2BAAY,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YACnC,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC,2BAAY,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;YACjE,MAAM;QACR,QAAQ;QACR,KAAK,kBAAS,CAAC,OAAO;YACpB,IAAI,GAAG,2BAAY,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YACnC,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC,2BAAY,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;YACjE,MAAM;KACT;IAED,OAAO,kBAAS,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACnC,CAAC;AAtBD,kCAsBC","sourcesContent":["import {getValue} from \"@tsed/core\";\nimport {OpenSpec2, OpenSpec3, OpenSpecVersions} from \"@tsed/openspec\";\nimport {mergeSpec, SpecTypes} from \"@tsed/schema\";\nimport {getSpecType} from \"./getSpecType\";\nimport {mapOpenSpec2} from \"./mapOpenSpec2\";\nimport {mapOpenSpec3} from \"./mapOpenSpec3\";\n\n/**\n * @ignore\n * @param spec\n * @param fileSpec\n * @param version\n * @param acceptMimes\n * @param specVersion\n */\nexport function mapOpenSpec(spec: any, {fileSpec, version, acceptMimes, specVersion}: any): Partial<OpenSpec2 | OpenSpec3> {\n  specVersion = specVersion || getValue<OpenSpecVersions>(spec, \"openapi\", getValue(spec, \"swagger\", \"2.0\"));\n\n  const options = {\n    version,\n    specVersion,\n    acceptMimes\n  };\n\n  switch (getSpecType(specVersion)) {\n    case SpecTypes.OPENAPI:\n      spec = mapOpenSpec3(spec, options);\n      fileSpec = fileSpec ? mapOpenSpec3(fileSpec, options) : fileSpec;\n      break;\n    default:\n    case SpecTypes.SWAGGER:\n      spec = mapOpenSpec2(spec, options);\n      fileSpec = fileSpec ? mapOpenSpec2(fileSpec, options) : fileSpec;\n      break;\n  }\n\n  return mergeSpec(spec, fileSpec);\n}\n"]}