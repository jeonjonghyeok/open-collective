"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.mapOpenSpec = void 0;
const core_1 = require("@tsed/core");
const schema_1 = require("@tsed/schema");
const getSpecType_1 = require("./getSpecType");
const mapOpenSpec2_1 = require("./mapOpenSpec2");
const mapOpenSpec3_1 = require("./mapOpenSpec3");
/**
 * @ignore
 * @param spec
 * @param fileSpec
 * @param version
 * @param acceptMimes
 * @param specVersion
 */
function mapOpenSpec(spec, { fileSpec, version, acceptMimes, specVersion }) {
    specVersion = specVersion || core_1.getValue(spec, "openapi", core_1.getValue(spec, "swagger", "2.0"));
    const options = {
        version,
        specVersion,
        acceptMimes
    };
    switch (getSpecType_1.getSpecType(specVersion)) {
        case schema_1.SpecTypes.OPENAPI:
            spec = mapOpenSpec3_1.mapOpenSpec3(spec, options);
            fileSpec = fileSpec ? mapOpenSpec3_1.mapOpenSpec3(fileSpec, options) : fileSpec;
            break;
        default:
        case schema_1.SpecTypes.SWAGGER:
            spec = mapOpenSpec2_1.mapOpenSpec2(spec, options);
            fileSpec = fileSpec ? mapOpenSpec2_1.mapOpenSpec2(fileSpec, options) : fileSpec;
            break;
    }
    return schema_1.mergeSpec(spec, fileSpec);
}
exports.mapOpenSpec = mapOpenSpec;
//# sourceMappingURL=mapOpenSpec.js.map