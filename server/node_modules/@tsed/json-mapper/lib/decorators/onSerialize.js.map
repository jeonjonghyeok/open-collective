{"version":3,"file":"onSerialize.js","sourceRoot":"","sources":["../../src/decorators/onSerialize.ts"],"names":[],"mappings":";;;AAAA,yCAA2D;AAM3D;;;;;;;;;;;;;;;;;GAiBG;AACH,SAAgB,WAAW,CAAC,EAAuB;IACjD,OAAO,qBAAY,CAAC,CAAC,UAAU,EAAE,EAAE;QACjC,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;IACrD,CAAC,CAAC,CAAC;AACL,CAAC;AAJD,kCAIC","sourcesContent":["import {JsonHookContext, JsonEntityFn} from \"@tsed/schema\";\n\nexport interface OnSerializeCallback {\n  (value: any, ctx: JsonHookContext): any;\n}\n\n/**\n * Call the function before property serialization.\n *\n * ## Example\n *\n * ```typescript\n * class Model {\n *    @OnSerialize(v => v + 1)\n *    property: string;\n * }\n * ```\n *\n * @returns {Function}\n * @decorator\n * @schema\n * @property\n * @param cb\n */\nexport function OnSerialize(cb: OnSerializeCallback): PropertyDecorator {\n  return JsonEntityFn((storedJson) => {\n    storedJson.itemSchema.$hooks.on(\"onSerialize\", cb);\n  });\n}\n"]}