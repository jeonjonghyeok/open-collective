{"version":3,"file":"getRequiredProperties.js","sourceRoot":"","sources":["../../src/utils/getRequiredProperties.ts"],"names":[],"mappings":";;;AAAA,qCAAgC;AAEhC;;GAEG;AACH,SAAgB,qBAAqB,CAAC,GAAQ,EAAE,MAAW,EAAE,QAAiB;IAC5E,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC;IAElC,QAAQ,GAAG,CAAC,GAAG,QAAQ,EAAE,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;IAE9C,IAAI,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;QAC5B,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC,GAAG,EAAE,IAAI,CAAgB,EAAE,EAAE;YAClG,IAAI,IAAI,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE;gBAC5C,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;aACzE;YAED,OAAO,QAAQ,CAAC;QAClB,CAAC,EAAE,QAAQ,CAAC,CAAC;KACd;IAED,IAAI,QAAQ,CAAC,MAAM,EAAE;QACnB,QAAQ,GAAG,WAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAE,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAY,IAAI,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QACpG,OAAO;YACL,GAAG,GAAG;YACN,QAAQ;SACT,CAAC;KACH;IAED,OAAO,GAAG,CAAC;AACb,CAAC;AAxBD,sDAwBC","sourcesContent":["import {uniq} from \"@tsed/core\";\n\n/**\n * @ignore\n */\nexport function getRequiredProperties(obj: any, schema: any, useAlias: boolean) {\n  let required = obj.required || [];\n\n  required = [...required, ...schema.$required];\n\n  if (schema.get(\"properties\")) {\n    required = Object.entries(schema.get(\"properties\")).reduce((required, [key, prop]: [string, any]) => {\n      if (prop && prop.$selfRequired !== undefined) {\n        return prop.$selfRequired ? required.concat(key) : required.filter(key);\n      }\n\n      return required;\n    }, required);\n  }\n\n  if (required.length) {\n    required = uniq(required).map((key) => (useAlias ? (schema.alias.get(key) as string) || key : key));\n    return {\n      ...obj,\n      required\n    };\n  }\n\n  return obj;\n}\n"]}