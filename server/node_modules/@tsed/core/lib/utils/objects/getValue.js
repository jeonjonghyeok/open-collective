"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getValue = void 0;
const isFunction_1 = require("./isFunction");
const isObject_1 = require("./isObject");
const isString_1 = require("./isString");
const mapOptions = (args) => {
    const [expression, scope, defaultValue, separator = "."] = args;
    if (isObject_1.isObject(scope) || isString_1.isString(expression)) {
        return {
            expression,
            scope,
            defaultValue,
            separator
        };
    }
    return {
        expression: scope,
        scope: expression,
        defaultValue,
        separator
    };
};
function getValue(...args) {
    const options = mapOptions(args);
    let scope = options.scope;
    const { expression, defaultValue, separator } = options;
    if (!expression) {
        return scope;
    }
    if (!scope) {
        return defaultValue;
    }
    const keys = expression.split(separator);
    const getValue = (key) => {
        if (scope instanceof Map || isFunction_1.isFunction(scope.get)) {
            return scope[key] || scope.get(key);
        }
        return scope[key];
    };
    while ((scope = getValue(keys.shift())) && keys.length) { }
    return scope === undefined ? defaultValue : scope;
}
exports.getValue = getValue;
//# sourceMappingURL=getValue.js.map