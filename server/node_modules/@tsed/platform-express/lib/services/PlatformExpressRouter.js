"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlatformExpressRouter = void 0;
const tslib_1 = require("tslib");
const common_1 = require("@tsed/common");
const di_1 = require("@tsed/di");
const Express = require("express");
const staticsMiddleware_1 = require("../middlewares/staticsMiddleware");
/**
 * @platform
 * @express
 */
let PlatformExpressRouter = class PlatformExpressRouter extends common_1.PlatformRouter {
    constructor(platform, configuration, routerOptions = {}) {
        var _a;
        super(platform);
        const options = Object.assign({
            mergeParams: true
        }, ((_a = configuration.express) === null || _a === void 0 ? void 0 : _a.router) || {}, routerOptions);
        this.rawRouter = this.raw = Express.Router(options);
    }
    statics(endpoint, options) {
        const { root, ...props } = options;
        this.use(endpoint, staticsMiddleware_1.staticsMiddleware(root, props));
        return this;
    }
};
PlatformExpressRouter = tslib_1.__decorate([
    tslib_1.__param(1, di_1.Configuration()),
    tslib_1.__param(2, di_1.Inject(common_1.PLATFORM_ROUTER_OPTIONS)),
    tslib_1.__metadata("design:paramtypes", [common_1.PlatformHandler, Object, Object])
], PlatformExpressRouter);
exports.PlatformExpressRouter = PlatformExpressRouter;
//# sourceMappingURL=PlatformExpressRouter.js.map