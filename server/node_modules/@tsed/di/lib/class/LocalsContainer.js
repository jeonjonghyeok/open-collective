"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LocalsContainer = void 0;
class LocalsContainer extends Map {
    /**
     * Emit an event to all service. See service [lifecycle hooks](/docs/services.md#lifecycle-hooks).
     * @param eventName The event name to emit at all services.
     * @param args List of the parameters to give to each services.
     * @returns {Promise<any[]>} A list of promises.
     */
    async emit(eventName, ...args) {
        const instances = this.toArray();
        for (const instance of instances) {
            if (typeof instance === "object" && instance && eventName in instance) {
                await instance[eventName](...args);
            }
        }
    }
    toArray() {
        return Array.from(this.values());
    }
    async destroy() {
        await this.emit("$onDestroy");
        this.clear();
    }
}
exports.LocalsContainer = LocalsContainer;
//# sourceMappingURL=LocalsContainer.js.map