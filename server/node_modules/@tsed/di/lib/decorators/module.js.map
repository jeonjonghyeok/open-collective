{"version":3,"file":"module.js","sourceRoot":"","sources":["../../src/decorators/module.ts"],"names":[],"mappings":";;;AAAA,qCAA2C;AAC3C,8CAAsF;AACtF,mDAA8C;AAC9C,6CAAwC;AA0BxC;;;;;;;;;;GAUG;AACH,SAAgB,MAAM,CAAC,UAAkC,EAAE;IACzD,MAAM,EAAC,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,aAAa,EAAC,GAAG,OAAO,CAAC;IAE5E,OAAO,sBAAe,CACpB,6BAAa,CAAC,aAAa,CAAC,EAC5B,uBAAU,CAAC;QACT,IAAI,EAAE,yBAAY,CAAC,MAAM;QACzB,KAAK,EAAE,0BAAa,CAAC,SAAS;QAC9B,OAAO;QACP,IAAI;QACJ,UAAU,EAAE,KAAK;QACjB,SAAS;KACV,CAAC,CACH,CAAC;AACJ,CAAC;AAdD,wBAcC","sourcesContent":["import {applyDecorators} from \"@tsed/core\";\nimport {IDIResolver, ProviderScope, ProviderType, TokenProvider} from \"../interfaces\";\nimport {Configuration} from \"./configuration\";\nimport {Injectable} from \"./injectable\";\n\nexport interface ModuleOptions extends Omit<TsED.Configuration, \"scopes\"> {\n  /**\n   * Provider scope\n   */\n  scope?: ProviderScope;\n  /**\n   * Providers must be initialized before building this module\n   */\n  imports?: TokenProvider[];\n  /**\n   * Explicit token must be injected in the constructor\n   */\n  deps?: TokenProvider[];\n  /**\n   * A list of resolvers to inject provider from external DI.\n   */\n  resolvers?: IDIResolver[];\n\n  /**\n   * Additional properties are stored as provider configuration.\n   */\n  [key: string]: any;\n}\n\n/**\n * Declare a new Ts.ED module\n *\n * ## Options\n * - imports: List of Provider which must be built by injector before invoking the module\n * - resolvers: List of external DI must be used to resolve unknown provider\n * - deps: List of provider must be injected to the module constructor (explicit declaration)\n *\n * @param options\n * @decorator\n */\nexport function Module(options: Partial<ModuleOptions> = {}) {\n  const {scopes, imports, resolvers, deps, scope, ...configuration} = options;\n\n  return applyDecorators(\n    Configuration(configuration),\n    Injectable({\n      type: ProviderType.MODULE,\n      scope: ProviderScope.SINGLETON,\n      imports,\n      deps,\n      injectable: false,\n      resolvers\n    })\n  );\n}\n"]}