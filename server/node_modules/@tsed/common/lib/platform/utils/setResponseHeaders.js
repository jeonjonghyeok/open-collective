"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setResponseHeaders = void 0;
function toHeaders(headers) {
    return Object.entries(headers).reduce((headers, [key, item]) => {
        return {
            ...headers,
            [key]: String(item.example)
        };
    }, {});
}
/**
 * @ignore
 */
function setResponseHeaders(ctx) {
    const { response, endpoint } = ctx;
    const { operation } = endpoint;
    if (response.isDone()) {
        return;
    }
    if (!response.hasStatus()) {
        // apply status only if the isn't already modified
        response.status(operation.getStatus());
    }
    const headers = operation.getHeadersOf(response.statusCode);
    response.setHeaders(toHeaders(headers));
    if (endpoint.redirect) {
        response.redirect(endpoint.redirect.status || 302, endpoint.redirect.url);
    }
    if (endpoint.location) {
        response.location(endpoint.location);
    }
}
exports.setResponseHeaders = setResponseHeaders;
//# sourceMappingURL=setResponseHeaders.js.map