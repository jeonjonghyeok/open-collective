"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ExceptionFilter = void 0;
const tslib_1 = require("tslib");
const exceptions_1 = require("@tsed/exceptions");
const catch_1 = require("../decorators/catch");
const ErrorFilter_1 = require("./ErrorFilter");
let ExceptionFilter = class ExceptionFilter extends ErrorFilter_1.ErrorFilter {
    catch(error, ctx) {
        const { response, logger, env } = ctx;
        const err = this.mapError(error, env);
        logger.error({
            error: err,
            stack: error.stack
        });
        response.setHeaders(this.getHeaders(error)).contentType("application/json").status(error.status).body(err);
    }
};
ExceptionFilter = tslib_1.__decorate([
    catch_1.Catch(exceptions_1.Exception)
], ExceptionFilter);
exports.ExceptionFilter = ExceptionFilter;
//# sourceMappingURL=ExceptionFilter.js.map