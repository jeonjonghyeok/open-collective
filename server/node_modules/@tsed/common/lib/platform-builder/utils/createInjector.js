"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createInjector = void 0;
const di_1 = require("@tsed/di");
const logger_1 = require("@tsed/logger");
const PlatformConfiguration_1 = require("../../config/services/PlatformConfiguration");
logger_1.$log.name = "TSED";
function createInjector(settings = {}) {
    const injector = new di_1.InjectorService();
    injector.settings = createSettingsService(injector);
    injector.logger = logger_1.$log;
    injector.settings.set(settings);
    di_1.setLoggerLevel(injector);
    return injector;
}
exports.createInjector = createInjector;
function createSettingsService(injector) {
    const provider = di_1.GlobalProviders.get(PlatformConfiguration_1.PlatformConfiguration).clone();
    provider.instance = injector.invoke(provider.useClass);
    injector.addProvider(PlatformConfiguration_1.PlatformConfiguration, provider);
    return provider.instance;
}
//# sourceMappingURL=createInjector.js.map