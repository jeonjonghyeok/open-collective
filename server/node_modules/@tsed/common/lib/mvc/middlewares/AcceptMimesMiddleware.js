"use strict";
var AcceptMimesMiddleware_1;
Object.defineProperty(exports, "__esModule", { value: true });
exports.AcceptMimesMiddleware = void 0;
const tslib_1 = require("tslib");
const exceptions_1 = require("@tsed/exceptions");
const decorators_1 = require("../../mvc/decorators");
const context_1 = require("../../platform/decorators/context");
/**
 * @middleware
 */
let AcceptMimesMiddleware = AcceptMimesMiddleware_1 = class AcceptMimesMiddleware {
    use(ctx) {
        const { endpoint, request } = ctx;
        const mimes = endpoint.get(AcceptMimesMiddleware_1) || [];
        if (!request.accepts(mimes)) {
            throw new exceptions_1.NotAcceptable(mimes.join(", "));
        }
    }
};
tslib_1.__decorate([
    tslib_1.__param(0, context_1.Context()),
    tslib_1.__metadata("design:type", Function),
    tslib_1.__metadata("design:paramtypes", [Object]),
    tslib_1.__metadata("design:returntype", void 0)
], AcceptMimesMiddleware.prototype, "use", null);
AcceptMimesMiddleware = AcceptMimesMiddleware_1 = tslib_1.__decorate([
    decorators_1.Middleware()
], AcceptMimesMiddleware);
exports.AcceptMimesMiddleware = AcceptMimesMiddleware;
//# sourceMappingURL=AcceptMimesMiddleware.js.map