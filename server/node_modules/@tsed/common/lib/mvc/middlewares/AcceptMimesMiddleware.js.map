{"version":3,"file":"AcceptMimesMiddleware.js","sourceRoot":"","sources":["../../../src/mvc/middlewares/AcceptMimesMiddleware.ts"],"names":[],"mappings":";;;;;AAAA,iDAA+C;AAC/C,qDAAgD;AAEhD,+DAA0D;AAE1D;;GAEG;AAEH,IAAa,qBAAqB,6BAAlC,MAAa,qBAAqB;IACzB,GAAG,CAAY,GAAY;QAChC,MAAM,EAAC,QAAQ,EAAE,OAAO,EAAC,GAAG,GAAG,CAAC;QAChC,MAAM,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,uBAAqB,CAAC,IAAI,EAAE,CAAC;QAExD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YAC3B,MAAM,IAAI,0BAAa,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC3C;IACH,CAAC;CACF,CAAA;AARC;IAAY,mBAAA,iBAAO,EAAE,CAAA;;;;gDAOpB;AARU,qBAAqB;IADjC,uBAAU,EAAE;GACA,qBAAqB,CASjC;AATY,sDAAqB","sourcesContent":["import {NotAcceptable} from \"@tsed/exceptions\";\nimport {Middleware} from \"../../mvc/decorators\";\nimport {IMiddleware} from \"../../mvc/interfaces\";\nimport {Context} from \"../../platform/decorators/context\";\n\n/**\n * @middleware\n */\n@Middleware()\nexport class AcceptMimesMiddleware implements IMiddleware {\n  public use(@Context() ctx: Context): void {\n    const {endpoint, request} = ctx;\n    const mimes = endpoint.get(AcceptMimesMiddleware) || [];\n\n    if (!request.accepts(mimes)) {\n      throw new NotAcceptable(mimes.join(\", \"));\n    }\n  }\n}\n"]}