"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getProtocolsFromRequest = void 0;
const core_1 = require("@tsed/core");
/**
 * @ignore
 */
function getProtocolName(req) {
    const { query = {}, params = {}, body = {} } = req;
    return params.protocol || query.protocol || body.protocol;
}
/**
 * @ignore
 */
function getProtocolsFromRequest(req, protocol, defaultProtocols) {
    if (!core_1.isArray(protocol)) {
        if (protocol === "*") {
            return defaultProtocols;
        }
        const protocolReq = getProtocolName(req);
        if (protocol === ":protocol") {
            return [protocolReq].filter(Boolean);
        }
        if (protocolReq && protocolReq !== protocol) {
            return [];
        }
        return [protocol];
    }
    const protocols = protocol;
    if (protocols.includes("*")) {
        return defaultProtocols;
    }
    return protocols;
}
exports.getProtocolsFromRequest = getProtocolsFromRequest;
//# sourceMappingURL=getProtocolsFromRequest.js.map